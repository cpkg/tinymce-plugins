var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};
tinymce.PluginManager.add("bdmap",function(a,b){var d=tinymce.baseURL||"https://unpkg.com/@npkg/tinymce-plugins";window.tinymceLng="";window.tinymceLat="";window.tinymceBDZoom="";window.tinymceBDW="";window.tinymceBDH="";window.tinymceBDBoxW="";window.tinymceBDBoxH="";window.tinymceBDBoxHtml="";window.tinymceBDDH="";window.tinymceBDSF="";window.tinymceBDBgColor="";window.tinymceBDDName="";var c=function(){return a.windowManager.open({title:"\u63d2\u5165\u767e\u5ea6\u5730\u56fe",size:"large",body:{type:"panel",
items:[{type:"iframe",name:"bdmap_iframe",label:"  ",sandboxed:!0}]},initialData:{bdmap_iframe:'<!doctype html>\n                <html>\n                <head>\n                <meta charset="utf-8" />\n                <title>Baidu Maps</title>\n                <style>\n                    html { height:100%; }\n                    body { height:100%;margin:0;padding:0;background-color:#fff; }\n                    .bigBox{height: 100vh;width: 100%; overflow: hidden;position: relative;}\n                    #search_box{position:fixed;top:5px;right:5px;z-index:9999;}\n                    #search_box input{\n                        -webkit-appearance: none;\n                        border-radius:3px;\n                        box-sizing:border-box;\n                        outline:0;\n                        box-shadow:0 0 3px rgba(0,0,0,0.4);\n                    }\n                    #search_box input[type="text"]{\n                        background-color:#fff;\n                        border:1px solid #ccc;\n                        color:#000;\n                        width:180px;\n                        padding:5px;\n                        font-size:16px;\n                        opacity:0.7;\n                        box-shadow:0 0 3px rgba(0,0,0,0.4);\n                    }\n                    #search_box input[type="button"]{\n                        margin-left:5px;\n                        background-color:#207ab7;\n                        border:1px solid #207ab7;\n                        color:#fff;\n                        padding:4px 6px;\n                        font-size:14px;\n                    }\n                    .setBox{ width: 100%; height: 26vh; position: absolute;left: 0;transition: all 0.6s;-webkit-transition: all 0.6s; bottom: -26vh;z-index: 99;background: #fff; }\n                    .setBox.on{  bottom: 0; }\n                \n                    .tox .tox-form__controls-h-stack {\n                    align-items: center;\n                    display: flex;\n                    }\n                    \n                .tox .tox-form__group {\n                    box-sizing: border-box;\n                    margin-bottom: 4px;\n                    margin-right:5px;\n                }\n                .tox .tox-label, .tox .tox-toolbar-label {\n                    color: rgba(34,47,62,.7);\n                    display: block;\n                    font-size: 14px;\n                    font-style: normal;\n                    font-weight: 400;\n                    line-height: 1.3;\n                    padding: 0 8px 0 0;\n                    text-transform: none;\n                    white-space: nowrap;\n                    }\n                    .tox .tox-selectfield select, .tox .tox-textarea, .tox .tox-textfield, .tox .tox-toolbar-textfield {\n                    -webkit-appearance: none;\n                    -moz-appearance: none;\n                    appearance: none;\n                    background-color: #fff;\n                    border-color: #ccc;\n                    border-radius: 3px;\n                    border-style: solid;\n                    border-width: 1px;\n                    box-shadow: none;\n                    box-sizing: border-box;\n                    color: #222f3e;\n                    font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;\n                    font-size: 16px;\n                    line-height: 24px;\n                    margin: 0;\n                    min-height: 34px;\n                    outline: 0;\n                    padding: 5px 4.75px;\n                    resize: none;\n                    width: 100%;\n                }\n                .tox .tox-textfield:focus,\n                .tox .tox-selectfield select:focus,\n                .tox .tox-textarea:focus {\n                  border-color: #207ab7;\n                  box-shadow: none;\n                  outline: none;\n                }\n                .tox .tox-textfield:focus,\n                .tox .tox-selectfield select:focus,\n                .tox .tox-textarea:focus {\n                  border-color: #207ab7;\n                  box-shadow: none;\n                  outline: none;\n                  padding: 4px;\n                }\n                .tox .tox-button--icon .tox-icon svg, .tox .tox-button.tox-button--icon .tox-icon svg, .tox .tox-button.tox-button--secondary.tox-button--icon .tox-icon svg {\n                    display: block;\n                    fill: currentColor;\n                    outline: none;\n                }\n                .tox .tox-lock.tox-locked .tox-lock-icon__unlock, .tox .tox-lock:not(.tox-locked) .tox-lock-icon__lock {\n                    display: none;\n                }\n                .tox .tox-button--naked {\n                    background-color: transparent;\n                    border-color: transparent;\n                    box-shadow: unset;\n                    color: #222f3e;\n                    padding: 4px;\n                }\n                .tox .tox-button--naked[disabled] {\n                  background-color: #f0f0f0;\n                  border-color: #f0f0f0;\n                  box-shadow: none;\n                  outline: none;\n                  color: rgba(34, 47, 62, 0.5);\n                }\n                .tox .tox-button--naked:hover:not(:disabled) {\n                  background-color: #e3e3e3;\n                  border-color: #e3e3e3;\n                  box-shadow: none;\n                  color: #222f3e;\n                  outline: none;\n                      \n                }\n                .tox .tox-button--naked:focus:not(:disabled) {\n                  background-color: #e3e3e3;\n                  border-color: #e3e3e3;\n                  box-shadow: none;\n                  outline: none;\n                \n                  color: #222f3e;\n                }\n                .tox .tox-button--naked:active:not(:disabled) {\n                  background-color: #d6d6d6;\n                  border-color: #d6d6d6;\n                  box-shadow: none;\n                  color: #222f3e;\n                }\n                .tox .tox-button--naked .tox-icon svg {\n                  fill: currentColor;\n                }\n                .tox .tox-button--naked.tox-button--icon:hover:not(:disabled) {\n                  color: #222f3e;\n                }\n                \n                .tox :not(svg):not(rect) {\n                    box-sizing: inherit;\n                    color: inherit;\n                    cursor: inherit;\n                    direction: inherit;\n                    font-family: inherit;\n                    font-size: inherit;\n                    font-style: inherit;\n                    font-weight: inherit;\n                    line-height: inherit;\n                    -webkit-tap-highlight-color: inherit;\n                    text-align: inherit;\n                    text-decoration: inherit;\n                    text-shadow: inherit;\n                    text-transform: inherit;\n                    vertical-align: inherit;\n                    white-space: inherit;\n                }\n                .tox .tox-button {\n                    \n                    background-color: transparent;\n                    background-image: none;\n                    background-position: 0 0;\n                    background-repeat: repeat;\n                    /* border-color: #207ab7; */\n                    border-radius: 3px;\n                    border-style: solid;\n                    border-width: 1px;\n                    box-shadow: none;\n                    box-sizing: border-box;\n                    color: #333;\n                    cursor: pointer;\n                    display: inline-block;\n                    font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;\n                    font-size: 14px;\n                    font-weight: 700;\n                    letter-spacing: normal;\n                    line-height: 24px;\n                    margin: 0;\n                    outline: 0;\n                    padding: 4px 16px;\n                    text-align: center;\n                    text-decoration: none;\n                    text-transform: capitalize;\n                    white-space: nowrap;\n                }\n                .textareaBox{ width: 26%;padding: 2% 0%; display: inline-block;vertical-align: top!important;margin-left:2%;}\n                .setCheck{vertical-align: top!important; width: 8%;padding: 2% 0%; display: inline-block;margin-left:2%;}\n                .setsize{vertical-align: top!important; width: 35%;padding: 2% 0%;  display: inline-block;margin-left:2%; }\n                .openBtn{ display: block;transition: all 0.3s; margin: 0 auto; width: 30px;height: 30px; margin-top: -30px; cursor: pointer; transform: rotate(180deg); }\n                \n                .setBox.on .openBtn{transform: rotate(0deg);}\n                .infoBoxContent{font-size:12px;padding:10px 8px;margin-bottom:3px; line-height: 1.5;letter-spacing: 1px;background: rgba(255,255,255,0.95); border: none; box-sizing: border-box;-moz-box-sizing:border-box; /* Firefox */-webkit-box-sizing:border-box; /* Safari */ }\n                    .infoBoxContent>i:last-child{display: block; content: ""; width: 15px;transform: rotate(45deg); height: 15px;position: absolute;bottom:-5px;left: 50%; margin-left:-8px;z-index: -1; background:inherit ;}\n                    .infoBoxContent *{line-height: 1.5; margin: 0;padding: 0; }\n                    .BMap_cpyCtrl.BMap_noprint.anchorBL{display: none!important;}\n                    .anchorBL{display: none!important;}\n                    .showBox{ pointer-events: none; opacity: 0.5;}\n                    .showBox[name="show"]{ pointer-events: all; opacity:1;}\n                    .infoBox>img{display: none!important;}\n                </style>\n                <script charset="utf-8" src="https://api.map.baidu.com/api?v=3.0&ak=ONwdanPtvCDLHBSm184T2ynP">\x3c/script>\n                <script src="https://api.map.baidu.com/library/InfoBox/1.2/src/InfoBox_min.js">\x3c/script>\n                \n                </head>\n                <body onload="initialize();">\n                   <div class="bigBox">\n                    <div id="search_box"><input id="kw" type="text" value="" autocomplete="off" placeholder="\u8f93\u5165\u8981\u641c\u7d22\u7684\u5730\u70b9" /><input type="button" value="\u641c\u7d22" onclick="searchByStationName()"></div>\n                    <div id="map_canvas" style="width:100%; height:100%"></div>\n                    <div class="setBox tox" id="setBoxID">\n                        <a href="javascript:openBox()" class="openBtn" ><svg t="1604471043166" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7209" width="30" height="30">\n                            <path d="M992.27 339.723l-466.975 216.039c-4.432 2.77-9.417 4.431-14.957 4.43100001l-1.662 0c-5.54 0-10.525-1.662-14.402-4.43100001l-466.976-216.03999999c-12.741-5.539-18.83499999-18.833-12.741-30.46600001s21.04999999-16.618 34.345-11.079l460.882 213.27 460.883-213.27c12.74-5.54 28.25100001 0 34.345 11.079 6.093 11.633 0.553 25.481-12.741 30.467z" fill="#1C6CA1"></path>\n                            <path d="M48.902 470.45399999l460.882 213.27000001 460.883-213.27c12.74-5.54 28.25100001 0 34.345 11.079 6.093 11.633 0 24.928-12.741 30.467l-466.97599999 216.039c-4.432 2.77-9.417 4.431-14.95700001 4.431l-1.662 0c-5.54 0-10.525-1.662-14.402-4.431L27.29800001 512c-12.741-5.54-18.835-18.834-12.74100001-30.467s21.604-16.618 34.345-11.07900001z" fill="#1C6CA1"></path></svg>\n                        </a>\n                        <div class="setsize " style="width: 18%;">\n                            <label class="tox-label" for="form-field_597838573111604453101745" style="font-size: 18px; padding-left:0px; letter-spacing: 1px;margin-bottom:10px; border-bottom: 1px solid #d6d6d6;">\u8bbe\u7f6e\u5730\u56fe\u5bbd\u9ad8</label>\n                            <div class="tox-form__controls-h-stack" style="padding-left:10px;">\n                                <div class="tox-form__group">\n                                    <label class="tox-label" for="form-field_597838573111604453101745">\u5bbd</label>\n                                    <input type="text" tabindex="-1" id="wInputID"   onBlur="setWHsize(0)" data-alloy-tabstop="true" class="tox-textfield" id="">\n                                </div>\n                                <div class="tox-form__group">\n                                    <label class="tox-label" for="">\u9ad8</label>\n                                    <input type="text" tabindex="-1" id="hInputID"   onBlur="setWHsize(1)" data-alloy-tabstop="true" class="tox-textfield" >\n                                </div>\n                                <div class="tox-form__group"><label class="tox-label">&nbsp;</label>\n                                     <button title="\u4fdd\u6301\u5bbd\u9ad8\u6bd4" type="button" data-alloy-tabstop="true" tabindex="-1" class="tox-lock tox-button tox-button--naked tox-button--icon tox-locked" aria-pressed="true">\n                                         <span class="tox-icon tox-lock-icon__lock" id="lockID" style="display: none;"  onclick="lock(true)"><svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3zM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7z" fill-rule="evenodd"></path></svg></span>\n                                         <span class="tox-icon tox-lock-icon__unlock" id="unlockID" style="display: block;"  onclick="lock(false)"><svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2z" fill-rule="evenodd"></path></svg></span>\n                                    </button>\n                                </div>\n                                 \n                                \n                            </div>\n                            <div class="tox-form__group"  style="padding-left:10px;" >\n                                <input type="text" tabindex="-1" id="bdDNameID"  style="display: none; height: 28px;min-height: 28px;" onBlur="setbdDName()" placeholder="\u8bf7\u8f93\u5165\u5bfc\u822a\u76ee\u7684\u540d\u79f0" data-alloy-tabstop="true" class="tox-textfield" >\n                            </div>\n                        </div>\n                        <div class="setCheck">\n                            <div class="tox-form__group">\n                                <label class="tox-label" style="font-size: 18px; padding-left:0px; letter-spacing: 1px;margin-bottom:10px; border-bottom: 1px solid #d6d6d6;">\u63a7\u4ef6\u8bbe\u7f6e</label>\n                                <label class="tox-checkbox" onclick="showBOX()">\n                                 <input type="checkbox" data-alloy-tabstop="true" tabindex="-1" class="tox-checkbox__input" id="openboxID">\n                                 <span unselectable="on" class="tox-checkbox__label tox-label"  for="form-field_6689627266931604472573007" style="user-select: none; display: inline!important;">\u4fe1\u606f\u5f39\u6846</span>\n                               </label><br>\n                                <label class="tox-checkbox" onclick="openSF()">\n                                        <input type="checkbox" data-alloy-tabstop="true" tabindex="-1" class="tox-checkbox__input" id="openSFID">\n                                        <span unselectable="on" class="tox-checkbox__label tox-label"  for="form-field_6689627266931604472573007" style="user-select: none; display: inline!important;">\u7f29\u653e\u63a7\u4ef6</span>\n                                </label>\n                                <label class="tox-checkbox" onclick="openDH()">\n                                    <input type="checkbox" data-alloy-tabstop="true" tabindex="-1" class="tox-checkbox__input" id="openDHID">\n                                    <span unselectable="on" class="tox-checkbox__label tox-label"  for="form-field_6689627266931604472573007" style="user-select: none; display: inline!important;">\u5bfc\u822a\u529f\u80fd</span>\n                                </label><br>\n                \n                            </div>\n                        </div>\n                        <div class="setsize showBox">\n                                <label class="tox-label" for="form-field_597838573111604453101745" style="font-size: 18px; padding-left:0px; letter-spacing: 1px;margin-bottom:10px; border-bottom: 1px solid #d6d6d6;">\u8bbe\u7f6e\u4fe1\u606f\u5f39\u6846</label>\n                                <div class="tox-form__controls-h-stack" style="padding-left:10px;">\n                                    <div class="tox-form__group" style="flex: 1;">\n                                        <label class="tox-label" for="form-field_597838573111604453101745">\u5bbd</label>\n                                        <input type="text" tabindex="-1" id="boxwInputID"   onBlur="setboxWHsize(0)" data-alloy-tabstop="true" class="tox-textfield" id="">\n                                    </div>\n                                    <div class="tox-form__group" style="flex: 1;">\n                                        <label class="tox-label" for="">\u9ad8</label>\n                                        <input type="text" tabindex="-1" id="boxhInputID"   onBlur="setboxWHsize(1)" data-alloy-tabstop="true" class="tox-textfield" >\n                                    </div>\n                                        <div class="tox-form__group" style="flex: 0.5;"><label class="tox-label">&nbsp;</label>\n                                         <button title="\u4fdd\u6301\u5bbd\u9ad8\u6bd4" type="button" data-alloy-tabstop="true" tabindex="-1" class="tox-lock tox-button tox-button--naked tox-button--icon tox-locked" aria-pressed="true">\n                                             <span class="tox-icon tox-lock-icon__lock" id="boxlockID"  style="display: none;"  onclick="boxlock(true)"><svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3zM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7z" fill-rule="evenodd"></path></svg></span>\n                                             <span class="tox-icon tox-lock-icon__unlock" id="boxunlockID" style="display: block;"  onclick="boxlock(false)"><svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2z" fill-rule="evenodd"></path></svg></span>\n                                        </button>\n                                    </div>\n                                    <div class="tox-form__group" style="flex: 2;">\n                                            <label class="tox-label" for="form-field_597838573111604453101745">\u8bbe\u7f6e\u80cc\u666f\u989c\u8272(#666)</label>\n                                            <input type="text" tabindex="-1"   onBlur="setboxbg()" data-alloy-tabstop="true" class="tox-textfield" id="boxBgID">\n                                    </div>\n                                </div>\n                            </div>\n                       <div class="textareaBox showBox">\n                         <div class="tox-form__group tox-form__group--stretched">\n                             <label class="tox-label" style="font-size: 18px; padding-left:0px; letter-spacing: 1px;margin-bottom:10px; border-bottom: 1px solid #d6d6d6;" for="form-field_1311027803221604462469765">\u4fe1\u606f\u7f16\u8f91(\u652f\u6301html,\u7981\u7528\u3010\u3011\uffe5^)</label>\n                             <textarea type="text"  class="tox-textarea"  onchange="setBoxHtml()" placeholder="\u4fe1\u606f\u6807\u7b7e" id="textID"></textarea>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  <script>\n                      function openBox(){\n                         if( document.getElementById("setBoxID").className=="setBox tox on") document.getElementById("setBoxID").className="setBox tox";\n                          else document.getElementById("setBoxID").className="setBox tox on";\n                      }\n                        var editor=parent.tinymce.activeEditor;\n                        function insCnt(txt){\n                            editor.insertContent(txt);\n                            parent.tinymce.activeEditor.windowManager.close();\n                        }\n                    \n                        var map, geocoder;\n                        var marker; \n                        var lng,lat;\n                        var infoBox;\n                        function initialize() {\n                            parent.tinymceBDBoxHtml=""\n                            map = new BMap.Map(\'map_canvas\');\n                            var point = new BMap.Point(116.331398,39.897445);\n                            map.centerAndZoom(point, 14);\n                            map.addControl(new BMap.NavigationControl());\n                            map.enableScrollWheelZoom();\n                    \n                            //\u6839\u636eIP\u5b9a\u4f4d\n                            var myCity = new BMap.LocalCity();\n                            myCity.get(function(result){map.setCenter(result.name);});\n                    \n                            var gc = new BMap.Geocoder();\n                            gc.getLocation(point, function(rs){\n                                var addComp = rs.addressComponents;\n                                var address = [addComp.city].join(\'\');\n                                //console.log(address);\n                            });\n                                \n                         \n                        \n                            map.addEventListener(\'click\',function(e){\n                                //alert(e.point.lng + "," + e.point.lat);\n                                lng=e.point.lng;\n                                lat=e.point.lat;\n                                marker = new BMap.Marker(new BMap.Point(e.point.lng, e.point.lat));\n                                // console.log( map.getZoom())\n                                // console.log( map)\n                \n                                parent.tinymceBDZoom = map.getZoom()\n                                map.clearOverlays();\n                                map.addOverlay(marker);\n                                //insCnt(lng+\',\'+lat);\n                                parent.tinymceLng=lng;\n                                parent.tinymceLat=lat;\n                                // parent.tinymceLat=lat;\n                                map.addOverlay(marker); // \u5c06\u6807\u6ce8\u6dfb\u52a0\u5230\u5730\u56fe\u4e2d\n                                 if(!infoBox){setInfoBox();}\n                                 else{\n                                    infoBox.remove();\n                                    setInfoBox();\n                                    openCheck.checked ?infoBox.show():\'\';\n                                 }\n                \n                            });\n                \n                        \n                            document.getElementById(\'kw\').addEventListener(\'keypress\',function(e){\n                                if(e.keyCode==\'13\'){\n                                    e.preventDefault();\n                                    searchByStationName();\n                                }\n                            });\n                        }\n                \n                        function setboxbg(){\n                            parent.tinymceBDBgColor = document.getElementById("boxBgID").value;\n                            if(parent.tinymceBDBgColor) document.getElementById("infoBoxContentID").style.background = parent.tinymceBDBgColor|| "rgba(255,255,255,0.95)";\n                            // console.log(parent.tinymceBDBgColor)\n                        }\n                        function setbdDName(){\n                            parent.tinymceBDDName = document.getElementById("bdDNameID").value;\n                        }\n                        function setInfoBox(){\n                                let temHtml = parent.tinymceBDBoxHtml? \'<div class="infoBoxContent" id="infoBoxContentID">\'+parent.tinymceBDBoxHtml+\'<i></i></div>\' : \'<div class="infoBoxContent" id="infoBoxContentID"><p>\u4fe1\u606f\u6807\u7b7e</p> <i></i></div>\'\n                                infoBox = new BMapLib.InfoBox(map,temHtml,{\n                                    boxStyle:{\n                                    background:"rgba(255,255,255,0)"\n                                    ,width: parent.tinymceBDBoxW || "270px"\n                                    ,closeIconMargin: "1px 1px 0 0"\n                                    ,enableAutoPan: true\n                                    ,align: INFOBOX_AT_TOP\n                                }\n                                })\n                            \n                                infoBox.open(marker); \n                                infoBox.hide();\n                                if(parent.tinymceBDBgColor) document.getElementById("infoBoxContentID").style.background = parent.tinymceBDBgColor|| "rgba(255,255,255,0.95)";\n                            }\n                        parent.tinymceBDDH = false;\n                        function openDH(){\n                            if(document.getElementById("openDHID").checked){\n                                parent.tinymceBDDH = document.getElementById("openDHID").checked;\n                                document.getElementById("bdDNameID").style.display="block";\n                            }else{document.getElementById("bdDNameID").style.display="none";}\n                            \n                        }\n                        parent.tinymceBDSF = false;\n                        function openSF(){\n                            parent.tinymceBDSF = document.getElementById("openSFID").checked;\n                        }\n                        \n                        let openCheck = document.getElementById(\'openboxID\');\n                        function showBOX(){\n                            // infoBox.show();\n                            if(infoBox){\n                                if(openCheck.checked ){\n                                     infoBox.show();\n                                     document.getElementsByClassName("showBox")[0].setAttribute("name", "show")\n                                     document.getElementsByClassName("showBox")[1].setAttribute("name", "show")\n                                    \n                                }else{ \n                                    infoBox.hide();\n                                    document.getElementsByClassName("showBox")[0].setAttribute("name", "hide")\n                                     document.getElementsByClassName("showBox")[1].setAttribute("name", "hide")\n                                }\n                            }else{\n                                alert("\u8bf7\u5148\u6807\u8bb0\u5730\u70b9");\n                                openCheck.checked= false;\n                            }\n                        }\n                        function setBoxHtml(){\n                            parent.tinymceBDBoxHtml = document.getElementById("textID").value;\n                            infoBox.setContent(\'<div class="infoBoxContent" id="infoBoxContentID"><p>\'+parent.tinymceBDBoxHtml+\'</p><i></i></div>\');\n                            if(parent.tinymceBDBgColor) document.getElementById("infoBoxContentID").style.background = parent.tinymceBDBgColor|| "rgba(255,255,255,0.95)";\n                        }\n                        function searchByStationName() {\n                            var localSearch = new BMap.LocalSearch(map);\n                            localSearch.enableAutoViewport(); //\u5141\u8bb8\u81ea\u52a8\u8c03\u8282\u7a97\u4f53\u5927\u5c0f\n                            map.clearOverlays();//\u6e05\u7a7a\u539f\u6765\u7684\u6807\u6ce8\n                            var keyword = document.getElementById("kw").value;\n                            localSearch.setSearchCompleteCallback(function (searchResult) {\n                                // console.log(searchResult);\n                                if(searchResult.Ar.length==0){\n                                    alert(\'\u641c\u7d22\u4e0d\u5230\u8be5\u5730\u533a\');\n                                    return false;\n                                }\n                                var poi = searchResult.getPoi(0);\n                                map.centerAndZoom(poi.point, 14);\n                                marker = new BMap.Marker(new BMap.Point(poi.point.lng, poi.point.lat));\n                                parent.tinymceLng=poi.point.lng;\n                                parent.tinymceLat=poi.point.lat;\n                                map.addOverlay(marker);\n                                if(!infoBox){setInfoBox();}\n                                 else{\n                                    infoBox.remove();\n                                    setInfoBox();\n                                    openCheck.checked ?infoBox.show():\'\';\n                                 }\n                \n                            });\n                            localSearch.search(keyword);\n                            return false;\n                        }\n                    \n                        var unFlog = false;\n                        let wInput = document.getElementById("wInputID");\n                        let hInput = document.getElementById("hInputID");\n                        parent.tinymceBDW = wInput.value="100%";\n                        parent.tinymceBDH = hInput.value="200px";\n                        var boxunFlog = false;\n                        let boxwInput = document.getElementById("boxwInputID");\n                        let boxhInput = document.getElementById("boxhInputID");\n                        parent.tinymceBDBoxW = boxwInput.value="270px";\n                        parent.tinymceBDBoxH = boxhInput.value="auto";\n                        function lock(o){\n                            if(o){\n                                document.getElementById("lockID").style.display="none";\n                                document.getElementById("unlockID").style.display="block";\n                               unFlog = false;\n                            }else{\n                               document.getElementById("unlockID").style.display="none";\n                               document.getElementById("lockID").style.display="block";\t\n                               unFlog = true;\n                            }\n                        }\n                        function boxlock(o){\n                            if(o){\n                                document.getElementById("boxlockID").style.display="none";\n                                document.getElementById("boxunlockID").style.display="block";\n                                boxunFlog = false;\n                            }else{\n                               document.getElementById("boxunlockID").style.display="none";\n                               document.getElementById("boxlockID").style.display="block";\t\n                               boxunFlog = true;\n                            }\n                        }\n                        function proportion(o1,o2,n1,n2){\n                            if(!(/^[0-9]+.?[0-9]*$/.test(n2.value.replace(/px/i,\'\').replace(/%/,\'\')))){n2.value="100%"}\n                            let proportion = (parseInt(o1)/parseInt(o2))*parseInt(n2.value);\n                            !proportion? proportion = 100:\'\';\n                            // console.log(proportion);\n                               if(n2.value.match("%")){\n                                    n1.value= proportion + \'%\';\n                               }else{\n                                  n1.value= proportion + \'px\';\n                                  n2.value.match(\'px\')?\'\':n2.value = n2.value+\'px\'\n                              }\n                        }\n                        function setWHsize(i){\n                            if(unFlog){\n                                i ? proportion(parent.tinymceBDW,parent.tinymceBDH, wInput, hInput,i) : proportion(parent.tinymceBDH,parent.tinymceBDW, hInput , wInput);\n                            }\n                            parent.tinymceBDW = wInput.value;\n                            parent.tinymceBDH = hInput.value;\n                        }\n                        function setboxWHsize(i){\n                            if(boxunFlog){\n                                i ? proportion(parent.tinymceBDBoxW,parent.tinymceBDBoxH, boxwInput, boxhInput,i) : proportion(parent.tinymceBDBoxH,parent.tinymceBDBoxW, boxhInput , boxwInput);\n                            }\n                            parent.tinymceBDBoxW = boxwInput.value;\n                            parent.tinymceBDBoxH = boxhInput.value;\n                            infoBox.remove()\n                            setInfoBox();\n                            infoBox.show();\n                            document.getElementById("infoBoxContentID").style.width =  parent.tinymceBDBoxW;\n                            document.getElementById("infoBoxContentID").style.height = parent.tinymceBDBoxH;\n                            \n                        }\n                    \n                        onbeforeunload = function(){\n                            // console.log("1212")\n                            parent.tinymceBDW = wInput.value;\n                            parent.tinymceBDH = hInput.value;\n                            parent.tinymceBDBoxW = boxwInput.value;\n                            parent.tinymceBDBoxH = boxhInput.value;\n                            parent.tinymceBDBoxHtml = document.getElementById("textID").value;\n                            parent.tinymceBDDH = document.getElementById("openDHID").checked;\n                            parent.tinymceBDBgColor = document.getElementById("boxBgID").value;\n                            parent.tinymceBDSF = document.getElementById("openSFID").checked;\n                            parent.tinymceBDDName = document.getElementById("bdDNameID").value;\n                        }\n                    \x3c/script>\n                </body>\n                </html>\n                '},
buttons:[{type:"cancel",text:"Close"},{type:"custom",text:"Save",name:"save",primary:!0}],onAction:function(e,f){switch(f.name){case "save":tinymceBDBoxHtml=tinymceBDBoxHtml.replace(/'/g,"\uffe5").replace(/"/g,"^").replace(/>/g,"\u3011").replace(/</g,"\u3010"),tinymceBDBgColor=tinymceBDBgColor.replace(/#/g,"@").replace(/\(/g,"+").replace(/\)/g,"-"),html='<iframe name="bdMap" src="'+d+"/plugins/bdmap/bd.html?center="+tinymceLng+"%2C"+tinymceLat+"&zoom="+(tinymceBDZoom?tinymceBDZoom:"14")+"&bwidth="+
tinymceBDBoxW+"&bheight="+tinymceBDBoxH+"&boxhtml="+tinymceBDBoxHtml+"&DH="+tinymceBDDH+"&bgColor="+tinymceBDBgColor+"&SF="+tinymceBDSF+"&dName="+tinymceBDDName+'" frameborder="0" style="width:'+tinymceBDW+";height:"+tinymceBDH+'; min-height: 100px;border:#ccc solid 1px;" height="'+tinymceBDH+'" width="'+tinymceBDW+'">',a.insertContent(html),tinymceBDDName=tinymceBDBgColor=tinymceBDSF=tinymceBDDH=tinymceBDBoxHtml=tinymceBDBoxH=tinymceBDBoxW=tinymceBDH=tinymceBDW=tinymceBDZoom=tinymceLat=tinymceLng=
"",e.close()}}})};a.ui.registry.getAll().icons.bdmap||a.ui.registry.addIcon("bdmap",'<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M670.8,733c21.1-46.1,45.6-73.7,64.5-90.5,10.3-9.2,21.1-16.8,32.5-21.7-6-8.1-10.6-15.3-15.2-22.2-8.4-12.6-17.3-27.1-21.7-34.1-28.7,15.7-55.9,48.2-77.5,77-12.5,16.7-23.8,34.7-34.7,53.7l52,37.9zM450.2,803.5c6,14.6,9.2,29.3,13.5,40.6,1.6,7.1,3.2,13.5,5.4,19.5,19.5-6,39-12,58-20.1,32.5-13.6,71-33,95.4-58.5l-45-48.2c-8.1,8.1-17.9,14.7-30.4,22.8-21.1,13.6-51.5,30.4-97,43.9zM373.8,204.1c0-52,43.4-95.4,95.4-95.4,53.7,0,94.8,43.4,94.8,95.4,0,53.6-41.2,95.4-94.8,95.4-52,0-95.4-41.7-95.4-95.4zm-105.7,0c0,20.1,2.7,39.6,8.7,58.5h-2.2c16.8,39,35.8,79.9,52,111.1l27.1,52c47.5,91.2,105.7,191.3,114.3,204.3,1.1,0,0.547,0,1.1,1.1,32.5-54.7,60.6-104.1,81.8-143.6l34.1-63.4,26.6-52c15.8-30.9,34.7-71,51.5-110.6h-1.6c6-19,8.7-38.5,8.7-58.5,0-110.6-90.5-200.5-201.1-200.5-111.1,0-201.1,90-201.1,200.5zM229.6,800.2c15.2,11.4,31.3,21.3,48.2,30.4,30.2,16,68.8,34.1,112.7,40.7,1.6-13.1,2.5-29.9,4.3-42.3l3.3-21.7c-11.9-2.2-25.6-5.6-40.1-10.8-24.5-8.8-55.8-23.8-90.5-48.2-9.2,13.5-18.6,25.7-26,35.8l-11.9,16.3zM17.2,949.8c0,41.2,33.6,74.2,74.2,74.2H932.5a74,74,0,0,0,74.2-74.2V336.9A74,74,0,0,0,932.5,262.6H728.2L692.4,362.9H894.6c9.2,0,15.7,6,15.7,15.2V511.4c-28.7-0.531-73.2,2.2-116.5,23.3l5.4,14.6,17.3,45c25.5-8.1,47.7-14.2,65-16.8l28.7-4.3V911.9c0,9.2-6.5,15.1-15.7,15.1H133.2c-9.2,0-15.7-5.9-15.7-15.1V704.8a261.1,261.1,0,0,0,15.2,14.1c9.3,8,23.3,21.1,41.2,36.3,10.3-9.2,20-21.2,28.2-29.8,4.8-5,9.2-9.8,13-14.6-42.8-35.8-86.2-86.2-97.5-100.3V378c0-8.7,6.5-15.2,15.7-15.2h53L209.5,262.5H91.4c-40.7,0-74.2,33.1-74.2,74.3V949.7z"/></svg>');
a.ui.registry.addButton("bdmap",{icon:"bdmap",tooltip:"\u63d2\u5165\u767e\u5ea6\u5730\u56fe",onAction:function(){c()}});a.ui.registry.addMenuItem("bdmap",{text:"\u63d2\u5165\u767e\u5ea6\u5730\u56fe",onAction:function(){c()}});return{getMetadata:function(){return{name:"\u63d2\u5165\u767e\u5ea6\u5730\u56fe",url:"https://github.com/Five-great/tinymce-plugins"}}}});